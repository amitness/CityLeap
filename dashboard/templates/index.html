{% extends 'layout.html' %}
{% block css %}
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.2.0/dist/leaflet.css"
          integrity="sha512-M2wvCLH6DSRazYeZRIm1JnYyh22purTM+FDB5CsyxtQJYeKq83arPe5wgbNmcFXGqiSH2XR8dT/fJISVA1r/zQ=="
          crossorigin=""/>
    <style>
        #mapid {
            height: 360px;
        }
    </style>
{% endblock %}
{% block content %}
        <div id="wrapper">
            <div id="mapid"></div>
    </div>

    <div class="container">
        <div class="row">
            <div class="col-md-6 text-center" id="pollution">
                Lorem ipsum dolor sit amet, consectetur adipisicing elit. Laudantium inventore porro temporibus odit
                quaerat
                sint numquam voluptatem, eos? Molestiae esse odit accusamus harum ipsam expedita, culpa delectus
                similique
                eaque dignissimos!
            </div>
            <div class="col-md-6 text-center" id="traffic">
                Lorem ipsum dolor sit amet, consectetur adipisicing elit. Voluptatem fugit unde ea modi velit voluptates
                saepe dignissimos quibusdam labore, totam porro laborum rerum ab dolorum facilis eligendi eos, cumque
                consequatur!
            </div>
        </div>
    </div>

    <div class="container">
        <div class="row">
            <div class="col-md-6 text-center" id="complains">
                c
            </div>
            <div class="col-md-6 text-center" id="categories">
                d
            </div>
        </div>
    </div>
{% endblock %}
{% block scripts %}
    <script src="https://unpkg.com/leaflet@1.2.0/dist/leaflet.js"
            integrity="sha512-lInM/apFSqyy1o6s89K4iQUKg6ppXEgsVxT35HbzUupEVRh2Eu9Wdl4tHj7dZO0s1uvplcYGmt3498TtHq+log=="
            crossorigin=""></script>
    <script>
        var demo_location = [27.6750719, 85.3140088];
        var mymap = L.map('mapid').setView(demo_location, 16);
        mymap.doubleClickZoom.disable();
        // var mymap = L.map('mapid', {doubleClickZoom: false}).locate({setView: true, maxZoom: 16});

        L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiYW1pdG5lc3MiLCJhIjoiY2pjMHZqZXAzMGZmbjJ4bW9md3lmMTkxdSJ9.-4b54xt_VBy1jhZKT6Ki6Q', {
            maxZoom: 18,
            id: 'mapbox.streets'
        }).addTo(mymap);

        // Display popup for current Location
        L.marker([27.67507, 85.31400]).addTo(mymap)
            .bindPopup("<b>Your Location</b>");

        var popup = L.popup();

        function onMapClick(e) {
            popup
                .setLatLng(e.latlng)
                .setContent("You clicked the map at " + e.latlng.toString())
                .openOn(mymap);
        }

        mymap.on('click', onMapClick);

        function addPinpoint(place) {
            // Adds a pinpoint to Leafleft map
            if (place.resultType == "place") {
                L.marker([place.lat, place.long])
                    .addTo(mymap)

            } else {
                L.marker([place.lat, place.long])
                    .addTo(mymap)

            }
        }

        addPinpoint({'resultType': 'place', 'lat': 27.715142, 'long': 82.749023});
    </script>

{% endblock %}